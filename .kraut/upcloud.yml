#
# UPCLOUD
#
# Settings used to configure the UpCloud API for the
# project.
#
# This file is only used if the UpCloud components are
# Initialized.
#
#

Access:
  # Username used for upcloud authorization
  User: wunderdocker
  # Upcloud password [this is a tokenized secret value]
  Password: "PUT SOME SECRETS TOKENIZATION HERE"

Servers:
  - Id: "some-machine-name" # can we automatically generate this?
    Zone: "fi-hell"

    Init: | # Either a URL to a script, or an inline generate script
      #!/bin/sh 
      # Inline script

    User:
      - Username: "kraut"
        SSHKeys:
          - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDEI7j4EaK2RRKgp7rA9gDIL279WtNBWsPQwKn6YNjb7i1EUAM+IYzdQbPgpYr0rMx67DhvbK1pBeL0HTXfk1ZnSbbZe2xktk+YJo6l8zQ7wYydWMcCcB5HUvgG1/ugTj6wxImYAx7sEuXY4MVO7aHmfMnjV+7Re0uXHjAPL9k5O2Xvt75RmrgG8YpE6MvZtYTzIRmINbuSAX9CWKi46ZuRNYKDyZTSarqA1TOaGKiO6vf2dM7bWqsvitOxwEC6Z0c5nIAjcAGhg+yBEEloWTqNqkxPzbh0AIIO9HjGlnbSaIffwrv78UzrHatukUQOcsg6PBvMPvhjdoB0JrscLneDy0DhF6ptAQporg3SieypB/3hiZ0RfT94c35DQufFphfsphIBXIsqENJKR383sz57PPDtVgyXKSu5ujhXUPgC1rwldGUqVtMLsvC4tcnOIbOK917QjUQ+8cJoC08XBUG10knUoIWP8ebv55sfnBTHW27g+4B1V6ub3Zyq/ZRzeJXWzSh1QmOUXp1Q47bEz3eT2/VRtKyUYAo3ChvceMSERsVtwfRgIcAreIqGy2GJQPe7NkYOAPrirwhfppoFJ/nx3xGFjg0iZIg4Z1nTpwEWBWcC5eo/yfORnhdAooJWRYO37nOrjryUZJsRbFC/Uj7JOIX2QrZEX1bm4SwgSF8tTQ=="

    Networks:
      - Access: private
        Family: IPV4
      - Access: ppublic
        Family: IPV4
      - Access: public
        Family: IPV6
    Firewall:
      Rules:
        - Action:               "accept"
          Comment:              "Alow HTTP from anywhere"
          DestinationPortEnd:   "80"
          DestinationPortStart: "80"
          Direction:            "in"
          Family:               "IPv4"
          Position:             1
          Protocol:             "tcp"
        - Action:               "accept"
          Comment:              "Allow SSH from a specific network only"
          DestinationPortEnd:   "22"
          DestinationPortStart: "22"
          Direction:            "in"
          Family:               "IPv4"
          ICMPType:             "tcp"
          Position:             2
          Protocol:             "tcp"
          SourceAddressEnd:     "192.168.1.255"
          SourceAddressStart:   "192.168.1.1"
        - Action:    "accept"
          Comment:   "Allow ICMP echo request (ping)"
          Direction: "in"
          Family:    "IPv4"
          Position:  4
          Protocol:  "icmp"
          ICMPType:  "8"

    Storage:
      - Action: clone
        Storage: "01000000-0000-4000-8000-000080010200" #size=5 title="CoreOS Stable 1068.8.0" type=template
        Title: "coreos-install"
        Size: 10 # Storage size in gigabytes, if cloning it has to be larger the source size
      
